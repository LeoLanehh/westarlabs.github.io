<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta property="og:title" content="Libra技术与实现"><meta property="og:description" content="2020年1月04日，Westar实验室组织了第二次技术Meetup，我们围绕Libra主题，探讨了Libra架构、共识以及Move语言"><meta property="og:type" content="article"><meta property="og:url" content="/blog/libra/"><meta property="article:published_time" content="2020-02-11T00:00:00+00:00"><meta property="article:modified_time" content="2020-02-11T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Libra技术与实现"><meta name=twitter:description content="2020年1月04日，Westar实验室组织了第二次技术Meetup，我们围绕Libra主题，探讨了Libra架构、共识以及Move语言"><meta name=generator content="Hugo 0.62.0"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Libra技术与实现","url":"\/blog\/libra\/","wordCount":"827","datePublished":"2020-02-11T00:00:00+00:00","dateModified":"2020-02-11T00:00:00+00:00","author":{"@type":"Person","name":"邓启明"},"keywords":"libra, blockchain, blog","description":"2020年1月04日，Westar实验室组织了第二次技术Meetup，我们围绕Libra主题，探讨了Libra架构、共识以及Move语言"}</script><link rel=canonical href=../../blog/libra/><title>Libra技术与实现 | Westar</title><link rel=stylesheet href=../../css/amazeui.min.css><link rel=stylesheet href=../../css/style.css></head><body><header class="am-topbar am-topbar-fixed-top header-light" style=background:#fff><div class=am-container-big><h1 class=am-topbar-brand><a href=../../ alt="westar logo" class=logo-a><img src=../../images/logo_dark.png alt></a></h1><button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-secondary am-show-sm-only" data-am-collapse="{target: '#collapse-head'}"><span class=am-sr-only>导航切换</span> <span class=am-icon-bars></span></button><div class="am-collapse am-topbar-collapse" id=collapse-head><div class=am-topbar-right><ul class="am-nav am-nav-pills am-topbar-nav"><li><a href=../../blog/>博客</a></li><li class=am-dropdown data-am-dropdown><a class=am-dropdown-toggle data-am-dropdown-toggle href=javascript:void(0);>项目</a><ul class=am-dropdown-content><li><a href=../../projects/sirius/><div class=nav-dropdown-item><div class=left><div class="icon nav-icon-sirius"></div></div><div class=right><h3 class=am-gallery-title>Sirius Protocol</h3><div class=section-faq-desc>去中心化、安全、多方、及时的二层支付协议</div></div></div></a></li><li><a href=../../projects/stargate/><div class=nav-dropdown-item><div class=left><div class="icon nav-icon-sirius"></div></div><div class=right><h3 class=am-gallery-title>Stargate Protocol</h3><div class=section-faq-desc>Starcoin 的二层协议实现</div></div></div></a></li><li><a href=../../projects/thor/><div class=nav-dropdown-item><div class=left><div class="icon nav-icon-sirius"></div></div><div class=right><h3 class=am-gallery-title>Thor Protocol</h3><div class=section-faq-desc>闪电网络上的智能合约和仲裁服务</div></div></div></a></li></ul></li><li><a href=../../about/>关于我们</a></li></ul></div></div></div></header><div class=news-container-detail><div class=am-container><div class=blog-main><article data-am-widget=paragraph class="am-paragraph am-paragraph-default" data-am-paragraph="{ tableScrollable: true, pureview: true }"><header><h2 class="news-title about-color blog-post-title" dir=auto>Libra技术与实现</h2><p class=blog-post-meta><time datetime=2020-02-11T00:00:00Z>Tue Feb 11, 2020</time>
by
邓启明
in
<i class="fa fa-folder" aria-hidden=true></i>&nbsp;<a href=../../categories/blog rel="category tag">blog</a>
<i class="fa fa-tag" aria-hidden=true></i>&nbsp;<a href=../../tags/libra rel=tag>libra</a>, <a href=../../tags/blockchain rel=tag>blockchain</a></p></header><p>6 月 18 日，Facebook 发布了 Libra 白皮书及源码，引起了业界的广泛关注与讨论。</p><p>这里我们通过分析Libra的源码，探索Libra的各个组件，来了解一下Libra的整体设计与实现。</p><h3 id=libra>Libra核心组件</h3><p>在进入主题之前，我们先对Libra有一个整体的认识：</p><p><img src=./images/libra-1.png alt=libra-1></p><p>看过Libra技术白皮书的朋友，应该都记得这张图，下面简单介绍一下这些核心的组件（后面还会有更详细的讨论）：</p><p>​ a. AdmissionControl服务：简称AC，翻译过来叫准入控制，可以理解为Libra的网关，将跟用户打交道的接口暴露给用户，例如提交Transaction、获取用户状态等等</p><p>​ b. Mempool服务：存储未上链交易</p><p>​ c. Consensus组件：LibraBFT共识组件</p><p>​ d. VirtualMachine组件：简称VM，运行Move合约的虚拟机</p><p>​ e. Execution组件：VM的入口，已换成Executor组件</p><p>​ f. Storage服务：存储所有链上数据</p><p>​ g. Network组件：上图中隐含了一个Network组件，不论是Node启动还是跟其他节点通信，都需要Network组件。在第一条主线中，我们重点介绍Network组件。</p><p>注意，上面介绍各个核心组件的时候，我们区分了组件和服务，两者的区别是：组件没有额外监听端口，与node共用同一个端口，而服务会单独监听一个端口，通常是GRPC服务。</p><h3 id=libra-1>Libra设计与实现</h3><p>Libra涉及的东西比较多，我们从三条线介绍Libra的设计与实现：</p><ol><li>通过分析Node启动并加入到Libra网络的过程，介绍<a href=http://westar.io/blog/libra_network/>Network组件的设计与实现</a>；</li><li>围绕<a href=http://westar.io/blog/libra_tx/>Transaction的生命周期</a>，分析其接收交易、打包区块、运行上链的过程，介绍Libra的Mempool、Executor以及Storage、VM等核心组件；</li><li>围绕LibraBFT，介绍<a href=http://westar.io/blog/libra_consensus/>Consensus组件</a>以及区块达成共识的过程</li></ol><p>Libra目前还处于测试网阶段，仍在不断的迭代，对此，我们充满了期待，但愿Libra能给区块链带来美好的春天。</p><hr><footer><section><h4>Share</h4><nav class="am-nav sharing-icons"><a class=am-nav-item href="https://www.facebook.com/sharer/sharer.php?u=%2fblog%2flibra%2f" title="Share on Facebook"><span class=am-icon-facebook-square aria-hidden=true></span></a><a class=am-nav-item href="https://www.linkedin.com/shareArticle?mini=true&url=%2fblog%2flibra%2f" title="Share on LinkedIn"><span class=am-icon-linkedin-square aria-hidden=true></span></a><a class=am-nav-item href="https://twitter.com/intent/tweet?url=%2fblog%2flibra%2f&text=Libra%e6%8a%80%e6%9c%af%e4%b8%8e%e5%ae%9e%e7%8e%b0" title="Tweet this"><span class=am-icon-twitter-square></span></a><a class=am-nav-item href="http://service.weibo.com/share/share.php?url=%2fblog%2flibra%2f&title=Libra%e6%8a%80%e6%9c%af%e4%b8%8e%e5%ae%9e%e7%8e%b0" title="Share to weibo"><span class=am-icon-weibo></span></a></nav></section></footer></article></div></div></div><footer class="footer footer-light"><div class=footer-logo><img src=../../images/footer_logo_dark.png width=50% height=50% alt></div><p class=foolter-slogo>关注我们，追踪项目最新状态</p><div class=foolter-follow><ul><li><a href=https://github.com/westarlabs/><img src=../../images/github_dark.png alt></a></li></ul></div><p>Copyright © <a href=../../ target=_blank>Westar</a> 2018-2019</p></footer><script src=../../js/zepto.min.js></script><script src=../../js/amazeui.min.js></script><script>$(function(){$(window).scroll(function(){var top=$(window).scrollTop();if(top>120){$("#header").css({"background":"#110651"})}else{$("#header").css({"background-color":"rgba(0,0,0,0)"})}});function winResize(){var w=$(window).width();var h=$(window).height();$("#section-one").css({"height":h,"width":w});var p=h/w
if(p>=0.58){$(".section-one-bg").css({"background-size":"auto 100%"})}else{$(".section-one-bg").css({"background-size":"100% auto"})}}
winResize();$(window).resize(function(){winResize();});var faqLenth=$(".faq-index").length;for(var i=0;i<faqLenth;i++){$(".faq-index").eq(i).html(i+1)}})</script></body></html>